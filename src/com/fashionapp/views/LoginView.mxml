<?xml version="1.0" encoding="utf-8"?>
<s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
		xmlns:s="library://ns.adobe.com/flex/spark"
		actionBarVisible="false" title="HomeView"
		creationComplete="view1_creationCompleteHandler(event)">
	<fx:Declarations>
		<!-- Place non-visual elements (e.g., services, value objects) here -->
	</fx:Declarations>
	<fx:Script>
		<![CDATA[
			import com.fashionapp.DAO.DaoLogin;
			import com.fashionapp.event.LoginClickEvent;
			import com.fashionapp.model.LoginData;
			import com.fashionapp.network.Network;
			import com.fashionapp.util.Utils;
			import com.fashionapp.views.poups.Alert;
			
			import mx.core.FlexGlobals;
			import mx.events.FlexEvent;
			/************************************************************************/
			protected function view1_creationCompleteHandler(event:FlexEvent):void
			{
				listeners();
			}
			private function listeners():void
			{
				if(FlexGlobals.topLevelApplication.hasEventListener('LoginClickEvent')==false){
					FlexGlobals.topLevelApplication.addEventListener('LoginClickEvent',loginClickEventListener,false,0,true);
				}
			}
			private function loginClickEventListener(event:LoginClickEvent):void
			{
				trace(Utils.decrypt(event.results,Utils.key));
				trace(Utils.decrypt(event.results,Utils.key));
				//Alert.show(this,Utils.decrypt(event.results,Utils.key)); 
				
			}
			/************************************************************************/
			private function login():void {
				if(txt_password.text == "" ||  txt_username.text == ""){
				}else{
				//if(Network.checkInterNetAvailability() == true){
					var str:String = "username="+txt_username.text+"&password="+"type=buyer";
					Network.callLoginAPI(Utils.encrypt(str,Utils.key)); 
				}				
			}
			/*************************************************************************************************/
			
			
		]]>
	</fx:Script>
	<s:layout>
		<s:VerticalLayout/>
	</s:layout>
	<s:VGroup width="100%" height="100%" horizontalAlign="center" verticalAlign="middle"
			  verticalCenter="0"
			  gap="25">
		<s:VGroup width="100%" gap="30"
				  top="160"
				  horizontalAlign="center">
			<s:Image top="160" width="60%" height="50" smooth="true"
					 smoothingQuality="high"
					 horizontalCenter="0"/>
			<s:BorderContainer height="1" backgroundColor="0x000000" width="18%"/>
			<s:Label text="BUYER APP LOGIN" fontSize="18"/>
		</s:VGroup>
		<s:TextInput width="95%" prompt="USERNAME"
					 skinClass="com.fashionapp.skins.LoginTextInputSkin"
					 id="txt_username"/>
		<s:TextInput width="95%" prompt="PASSWORD" displayAsPassword="true"
					 skinClass="com.fashionapp.skins.LoginTextInputSkin"
					 id="txt_password"/>
		<s:VGroup width="100%" horizontalAlign="center"
				  gap="25">
			<s:Button label="LOGIN" click="login()"
					  skinClass="com.fashionapp.skins.LoginButtonSkin" width="95%"
					  height="40"/>
			<s:Label text="Forgot Password"
					 textDecoration="underline" fontStyle="italic"
					 fontSize="14"/>
		</s:VGroup>
	</s:VGroup>
</s:View>

